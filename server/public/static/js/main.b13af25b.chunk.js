(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{181:function(e,t,n){e.exports=n.p+"static/media/close_g.1763d4c2.svg"},183:function(e,t,n){e.exports=n.p+"static/media/close_g.1763d4c2.svg"},184:function(e,t,n){e.exports=n.p+"static/media/close_w.18ad7025.svg"},188:function(e,t,n){e.exports=n(433)},193:function(e,t,n){},194:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},428:function(e,t,n){},429:function(e,t,n){},431:function(e,t,n){},432:function(e,t,n){},433:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(42),c=n.n(o),i=(n(193),n(3)),l=n(4),s=n(9),u=n(11),m=n(10),d=n(12),p=(n(194),n(37)),h=n(31),g=n(1),f=n(2),v={green:"#6AA76F",white:"#FFFFFF",red:"#A78F6A",blue:"#1B8ECF",gray:"#A0A0A0"};function b(){var e=Object(g.a)(["\n        border: none;\n        background-color: ",";\n        background-image: ",";\n        background-position: center;\n        background-repeat: no-repeat;\n        width: 5vw;\n        height: 3vh;\n        margin-right: 1rem;\n        margin-top: 1rem;\n"]);return b=function(){return e},e}var E=f.a.button(b(),v.green,(function(e){return"white"===e.btnColor?"url(../images/close_w.svg)":"url(./images/close_g.svg)"})),w=function(e){var t=e.btnColor,n=e.logout;return r.a.createElement(E,{btnColor:t,onClick:n})},y=n(7);function j(){var e=Object(g.a)(["\n        border: none;\n        background-color: ",";\n        background-image: ",";\n        background-position: center;\n        background-repeat: no-repeat;\n        width: 5vw;\n        height: 3vh;\n        margin-right: 1rem;\n        margin-top: 1rem;\n"]);return j=function(){return e},e}var O=f.a.button(j(),v.green,(function(e){return"white"===e.btnColor?"url(../images/user_w.svg)":"url(./images/user_g.svg)"})),k=function(e){var t=e.btnColor;return r.a.createElement(y.b,{to:{pathname:"/profile"}},r.a.createElement(O,{btnColor:t}))};function x(){var e=Object(g.a)(["\n display:",";\n flex-direction: column;\n"]);return x=function(){return e},e}function S(){var e=Object(g.a)(["\n  width: 75vw;\n  height: 10vh;\n"]);return S=function(){return e},e}function C(){var e=Object(g.a)(["\n  width: 100vw;\n  display: flex;\n  justify-content: ",";\n  padding-left: 1rem;\n  box-sizing: border-box;\n"]);return C=function(){return e},e}var U=f.a.div(C(),(function(e){return e.controls?"space-between":"center"})),_=f.a.img(S()),P=f.a.div(x(),(function(e){return e.controls?"flex":"none"})),F=function(e){var t=e.controls,n=e.logoutHandler;return r.a.createElement(U,{controls:t},r.a.createElement(_,{src:"../images/green_care_w.svg",alt:"green care logo"}),r.a.createElement(P,{controls:t},r.a.createElement(w,{btnColor:"white",logout:n}),r.a.createElement(k,{btnColor:"white"})))},I=n(25),N=n.n(I),z=function e(){var t=this;Object(l.a)(this,e),this.signup=function(e){return t.instance.post("/signup",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.login=function(e){return t.instance.post("/login",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.loggedInUser=function(){return t.instance.get("/loggedin").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.logout=function(){return t.instance.post("/logout").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.upload=function(e){return t.instance.post("/upload",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.instance=N.a.create({baseURL:"".concat("https://green-care.herokuapp.com/api","/auth"),withCredentials:!0})};n(215);function M(){var e=Object(g.a)(['\n  font-family: "Encode Sans";\n  font-weight: 400;\n  font-size: 1em;\n  color: ',";\n  margin-top: 1rem;\n  margin-bottom: 0.5rem;\n"]);return M=function(){return e},e}function D(){var e=Object(g.a)(["\n  color: ",";\n  font-size: 1.2rem;\n  border: none;\n  border-radius: 22px;\n  height: 50px;\n  min-width: 230px;\n  max-width: 350px;\n  padding: 10px;\n  margin: 5px;\n  box-sizing: border-box;\n  ::placeholder {\n    color: ",";\n  }\n"]);return D=function(){return e},e}function R(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  flex-flow: column;\n  width: 100vw;\n  height: 50vh;\n  margin: 0 auto;\n  .button-box {\n    display: flex;\n    flex-direction: column;\n    margin-top: 2rem;\n    button {\n      background: ",";\n      color: ",";\n      font-size: 1.2rem;\n      font-weight: 600;\n      border: none;\n      border-radius: 25px;\n      height: 50px;\n      min-width: 230px;\n      max-width: 350px;\n      padding: 10px;\n      margin: .5rem;\n      box-sizing: border-box;\n    }\n    .btn-green {\n      background: ",";\n      border: 1px solid ",";\n      color: ",";\n    }\n  }\n"]);return R=function(){return e},e}var T=f.a.div(R(),v.white,v.green,v.green,v.white,v.white),H=f.a.input(D(),v.gray,v.gray),L=f.a.label(M(),v.white),A=function(e){var t=e.username,n=e.password,a=e.handleChange,o=e.placeholder;return r.a.createElement(T,null,r.a.createElement(L,{htmlFor:"username"},"User name: "),r.a.createElement(H,{type:"text",name:"username",value:t,onChange:a,placeholder:o}),r.a.createElement(L,{htmlFor:"password"},"Password: "),r.a.createElement(H,{type:"password",name:"password",value:n,onChange:a}),r.a.createElement("div",{className:"button-box"},r.a.createElement("button",{className:"btn-green",type:"submit"},"Enter"),r.a.createElement(y.b,{to:{pathname:"/signup"}},r.a.createElement("button",null,"New user"))))};function B(){var e=Object(g.a)(["\n  height: 20vh;\n    margin-top: .5rem;\n  }\n"]);return B=function(){return e},e}var G=f.a.img(B()),W=function(){return r.a.createElement(G,{src:"./images/leaf_w.svg",alt:"green care"})},Y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:"bob",password:"b"},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(i.a)({},n.state,Object(h.a)({},a,r)))},n.handleLogin=function(e){var t=n.props,a=t.setUser,r=t.history;e.preventDefault(),n.authService.login(n.state).then((function(e){a(e),r.push("/main")}),(function(e){console.error(e)}))},n.authService=new z,n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return r.a.createElement("div",{className:"login-wrapper"},r.a.createElement(F,{controls:!1}),r.a.createElement(W,null),r.a.createElement("form",{onSubmit:this.handleLogin},r.a.createElement(A,{username:t,password:n,handleChange:this.handleChange,handleLogin:this.handleLogin,placeholder:"User name"})))}}]),t}(a.Component);n(216);function V(){var e=Object(g.a)(['\n  font-family: "Roboto";\n  font-weight: 300;\n  font-size: 1em;\n  font-style: italic;\n  color: ',";\n  background-color: "," ;\n  padding: 2px 5px;\n  border-radius: 5px;\n"]);return V=function(){return e},e}function q(){var e=Object(g.a)(['\n  font-family: "Encode Sans";\n  font-weight: 400;\n  font-size: 1em;\n  color: ',";\n  margin-top: 1rem;\n  margin-bottom: 0.5rem;\n"]);return q=function(){return e},e}function Z(){var e=Object(g.a)(["\n  color: ",";\n  font-size: 1.2rem;\n  border: none;\n  border-radius: 22px;\n  height: 50px;\n  min-width: 230px;\n  max-width: 350px;\n  padding: 10px;\n  margin: 5px;\n  box-sizing: border-box;\n  ::placeholder {\n    color: ",";\n  }\n"]);return Z=function(){return e},e}function J(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: column;\n  width: 100vw;\n  height: 50vh;\n  .button-box {\n    display: flex;\n    flex-direction: column;\n    margin-top: 2rem;\n    button {\n      background: ",";\n      color: ",";\n      font-size: 1.2rem;\n      font-weight: 600;\n      border: none;\n      border-radius: 25px;\n      height: 50px;\n      min-width: 230px;\n      max-width: 350px;\n      padding: 10px;\n      margin: .5rem;\n      box-sizing: border-box;\n    }\n    .btn-green {\n      background: ",";\n      border: 1px solid ",";\n      color: ",";\n    }\n\n    .btn-red {\n      background: ",";\n      border: 1px solid ",";\n      color: ",";\n    }\n  }\n"]);return J=function(){return e},e}var K=f.a.div(J(),v.white,v.green,v.green,v.white,v.white,v.red,v.white,v.white),Q=f.a.input(Z(),v.gray,v.gray),X=f.a.label(q(),v.white),$=f.a.p(V(),v.white,v.red),ee=function(e){var t=e.username,n=e.password,a=e.passwordR,o=e.handleChange,c=e.placeholder,i=e.error;return r.a.createElement(K,null,r.a.createElement(X,{htmlFor:"username"},"New user name: "),r.a.createElement(Q,{type:"text",name:"username",value:t,onChange:o,placeholder:c}),r.a.createElement(X,{htmlFor:"password"},"New password: "),r.a.createElement(Q,{type:"password",name:"password",value:n,onChange:o}),r.a.createElement(X,{htmlFor:"passwordR"},"Repeat password: "),r.a.createElement(Q,{type:"password",name:"passwordR",value:a,onChange:o}),i&&r.a.createElement($,null,i),r.a.createElement("div",{className:"button-box"},r.a.createElement("button",{className:"btn-green",type:"submit"},"Create user"),r.a.createElement(y.b,{to:{pathname:"/login"}},r.a.createElement("button",{className:"btn-red"},"Cancel"))))},te=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:"",passwordR:"",error:""},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(i.a)({},n.state,Object(h.a)({},a,r)))},n.handleSignUp=function(e){if(e.preventDefault(),n.state.password===n.state.passwordR){var t=n.props,a=t.history,r=t.setUser;n.authService.signup(n.state).then((function(e){console.log(e),r(e),a.push("/main")}),(function(e){n.setState(Object(i.a)({},n.state,{error:e}))}))}else n.setState(Object(i.a)({},n.state,{error:"Password don't match"}))},n.authService=new z,n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,a=e.passwordR,o=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{src:"./images/green_care_w.svg",alt:"green care logo",logoutHandler:this.props.handleLogout}),r.a.createElement("form",{className:"form-wrapper",onSubmit:this.handleSignUp},r.a.createElement(ee,{username:t,password:n,passwordR:a,handleChange:this.handleChange,placeholder:"User name",error:o})))}}]),t}(a.Component),ne=(n(217),function e(){var t=this;Object(l.a)(this,e),this.getPlantById=function(e){return t.instance.get("/".concat(e)).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.getUserPlants=function(e){return t.instance.get("/user/".concat(e)).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.createPlant=function(e){return t.instance.post("/create",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.deletePlant=function(e){return t.instance.delete("/delete/".concat(e)).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.updatePlant=function(e){return t.instance.put("/update",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.uploadPlantImage=function(e){return t.instance.post("/upload",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.instance=N.a.create({baseURL:"".concat("https://green-care.herokuapp.com/api","/plants"),withCredentials:!0})}),ae=function e(){var t=this;Object(l.a)(this,e),this.createTasks=function(e){return t.instance.post("/multicreate",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.createTask=function(e,n){return n.plantId=e,t.instance.post("/create",n).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.updateTask=function(e){return t.instance.put("/update",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.deleteTask=function(e){return t.instance.put("/delete",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.instance=N.a.create({baseURL:"".concat("https://green-care.herokuapp.com/api","/tasks"),withCredentials:!0})},re=function e(){var t=this;Object(l.a)(this,e),this.getUsers=function(){return t.instance.get("/all").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.getUserByIdDeep=function(e){return t.instance.get("/deep/".concat(e)).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.getUserByIdShallow=function(e){return t.instance.get("/shallow/".concat(e)).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.updateUser=function(e){return t.instance.put("/update",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.updateUserProfile=function(e){return t.instance.put("/update-profile",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.deleteUserPlant=function(e,n){var a={user:e,plant:n};return t.instance.put("/deletePlant",a).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.uploadUserImage=function(e){return t.instance.post("/upload",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.instance=N.a.create({baseURL:"".concat("https://green-care.herokuapp.com/api","/users"),withCredentials:!0})},oe=function e(){var t=this;Object(l.a)(this,e),this.calcDistance=function(e,n,a,r){var o=t.toRad(a-e),c=t.toRad(r-n);e=t.toRad(e),a=t.toRad(a);var i=Math.sin(o/2)*Math.sin(o/2)+Math.sin(c/2)*Math.sin(c/2)*Math.cos(e)*Math.cos(a);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},this.toRad=function(e){return e*Math.PI/180},this.getUserLocationArr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.02,a=[];if(e.length>0){var r=e.pop();for(a.push(r);e.length>0;){var o=e.pop();t.calcDistance(r[0],r[1],o[0],o[1])>n&&(a.push(o),r=o)}}return a}},ce=(n(218),function(e){return e.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")});function ie(){var e=Object(g.a)(["\n  display: flex;\n  button {\n    border: none;\n    background-color: ",";\n    background-position: center-top;\n    background-repeat: no-repeat;\n    background-size: cover;\n    width: 2rem;\n    height: 2rem;\n    margin-top: 2rem;\n  }\n  .btn-edit {\n    background-image: url(./images/edit_w.svg);\n  }\n  .btn-delete {\n    background-image: url(./images/trash_w.svg);\n    margin-left: 2rem;\n  }\n"]);return ie=function(){return e},e}function le(){var e=Object(g.a)(["\n  color: ",';\n\n  h2 {\n    font-size: 1.6rem;\n    margin-bottom: 1rem;\n  }\n  p {\n    font-size: 1rem;\n    font-family: "Roboto";\n    font-style: italic;\n  }\n']);return le=function(){return e},e}function se(){var e=Object(g.a)(["\n  width: 140px;\n  height: 140px;\n  border-radius: 50%;\n  border: 8px solid ",";\n  box-sizing: border-box;\n"]);return se=function(){return e},e}function ue(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  margin: 2rem 1rem;\n"]);return ue=function(){return e},e}var me=f.a.div(ue()),de=f.a.img(se(),v.white),pe=f.a.div(le(),v.white),he=f.a.div(ie(),v.green),ge=function(e){var t=e.plant,n=t.id,a=t.picture,o=t.name,c=t.common_name,i=t.deletePlant;return r.a.createElement(me,null,r.a.createElement(y.b,{to:{pathname:"/plant-detail/".concat(n),state:{flavour:"readonly"}}},r.a.createElement(de,{id:n,src:a})),r.a.createElement("div",{className:"side-wrapper"},r.a.createElement(y.b,{to:{pathname:"/plant-detail/".concat(n),state:{flavour:"readonly"}}},r.a.createElement(pe,{id:n},r.a.createElement("h2",null,ce(o)),r.a.createElement("p",null,ce(c)))),r.a.createElement(he,null,r.a.createElement(y.b,{to:{pathname:"/plant-update/".concat(n),state:{flavour:"update"}}},r.a.createElement("button",{className:"btn-edit"})),r.a.createElement("button",{className:"btn-delete",id:n,onClick:function(e){return i(e)}}))))};function fe(){var e=Object(g.a)(["\n  border: none;\n  background-color: ",";\n  background-image: url(",");\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  width: 4rem;\n  height: 4rem;\n  margin-right: 1rem;\n  margin-top: 1rem;\n"]);return fe=function(){return e},e}var ve=f.a.button(fe(),v.green,(function(e){return e.img})),be=function(e){var t=e.img,n=e.clicked;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve,{img:t,onClick:function(e){return n(e)}}))};function Ee(){var e=Object(g.a)(["\n  display: flex;\n  justify-content: space-evenly;\n  align-items: center;\n  margin-top: 1rem;\n  .btn-green {\n    background: ",";\n    border: 1px solid ",";\n  }\n  .btn-red {\n    background: ",";\n  }\n  .btn-new {\n    background: ",";\n    color: ",";\n    font-size: 2.5rem;\n    font-weight: 600;\n    padding: 0;\n    line-height: 1rem;\n    align-self: flex-end;\n  }\n"]);return Ee=function(){return e},e}function we(){var e=Object(g.a)(['\n  font-family: "Encode Sans";\n  color: ',";\n  font-size: 1.2rem;\n  font-weight: 600;\n  border: none;\n  border-radius: 25px;\n  height: 40px;\n  min-width: 140px;\n  max-width: 350px;\n  padding: 5px 10px 10px;\n  margin: 0.5rem;\n  box-sizing: border-box;\n"]);return we=function(){return e},e}var ye=f.a.button(we(),v.white),je=f.a.div(Ee(),v.green,v.white,v.red,v.white,v.green),Oe=function(e){var t=e.updateHandler,n=e.flavour,a=e.sourceUserId,o=e.goBackHandler;return r.a.createElement(je,null,function(){switch(n){case"readonly":return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(ye,{className:"btn-red",onClick:function(e){return o(e,a)}},"Go back"):r.a.createElement(y.b,{to:{pathname:"/main"}},r.a.createElement(ye,{className:"btn-red"},"Go back")));case"update":return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.b,{to:{pathname:"/main"}},r.a.createElement(ye,{className:"btn-red"},"Cancel")),r.a.createElement(ye,{className:"btn-green",onClick:function(e){return t(e)}},"Update"));case"create":return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,{className:"btn-green",onClick:function(e){return t(e)}},"Create"));case"main":return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.b,{to:{pathname:"/calendar"}},r.a.createElement(be,{img:"../images/calendar_w.svg",clicked:function(){return""}})),r.a.createElement(y.b,{to:{pathname:"/plant/new",state:{flavour:"create"}}},r.a.createElement(ye,{className:"btn-new"},"+")),r.a.createElement(y.b,{to:{pathname:"/plants-map"}},r.a.createElement(be,{img:"../images/map_w.svg",clicked:function(){return""}})));default:return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.b,{to:{pathname:"/main"}},r.a.createElement(ye,{className:"btn-red"},"Cancel")),r.a.createElement(ye,{className:"btn-green",onClick:function(e){return t(e)}},"Accept"))}}())},ke=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).updatePlants=function(){n.plantService.getUserPlants(n.props.loggedInUser.id).then((function(e){n.setState(Object(i.a)({},n.state,{plants:e}))}),(function(e){var t=e.message;console.error(t)}))},n.deletePlant=function(e){e.preventDefault();var t=Object(i.a)({},n.props.loggedInUser),a=n.state.plants.find((function(t){return t.id===e.target.id}));n.plantService.deletePlant(a.id).then((function(){return n.userService.deleteUserPlant(t,a)})).then((function(){return n.userService.getUserByIdDeep(t.id)})).then((function(e){var t=[];return e.plants.forEach((function(e){return t.push(e.location.coordinates)})),e.locations=n.geoService.getUserLocationArr(t,.002),e.plants=e.plants.reduce((function(e,t){return e.push(t.id),e}),[]),n.userService.updateUser(e)})).then((function(){return n.updatePlants()})).catch((function(e){return console.error(e)}))},n.plantService=new ne,n.taskService=new ae,n.userService=new re,n.geoService=new oe,n.state={plants:[]},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updatePlants()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"fixed-top-aux-padding"},r.a.createElement("div",{className:"fixed-controls up"},r.a.createElement(F,{logoutHandler:this.props.handleLogout,controls:!0})),this.state.plants.map((function(t){return r.a.createElement(ge,{key:t.id,plant:Object(i.a)({},t,{deletePlant:e.deletePlant})})})),r.a.createElement("div",{className:"fixed-controls down"},r.a.createElement(Oe,{flavour:"main"}))))}}]),t}(a.Component);n(219);function xe(){var e=Object(g.a)(["\n  width: ","px;\n  height: ","px;\n  border-radius: 50%;\n  border: 8px solid ",";\n  box-sizing: border-box;\n"]);return xe=function(){return e},e}function Se(){var e=Object(g.a)(["\n  cursor: pointer;\n"]);return Se=function(){return e},e}function Ce(){var e=Object(g.a)(["\n  display: none;\n"]);return Ce=function(){return e},e}var Ue=f.a.input(Ce()),_e=f.a.label(Se()),Pe=f.a.img(xe(),(function(e){return e.size?e.size:"178"}),(function(e){return e.size?e.size:"178"}),v.white),Fe=function(e){var t=e.picture,n=e.handleUpload,a=e.flavour,o=e.size;return r.a.createElement(r.a.Fragment,null,"readonly"!==a?r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,{htmlFor:"file-upload",className:"custom-file-upload"},r.a.createElement(Pe,{src:t})),r.a.createElement(Ue,{id:"file-upload",type:"file",onChange:n})):r.a.createElement(Pe,{className:"round-img",src:t,size:o}))};function Ie(){var e=Object(g.a)(["\n  position: absolute;\n  width: 100vw;\n  height: 100vh;\n  background-color : rgba(0,0,0,.2);\n  background-image : url(../images/Spinner-1s-200px.svg);\n  background-position: center;\n  background-repeat: no-repeat;\n  z-index : 1000;\n  }\n"]);return Ie=function(){return e},e}var Ne=f.a.div(Ie()),ze=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(i.a)({},n.state,Object(h.a)({},a,r)))},n.handleUpload=function(e){var t=new FormData;t.append("picture",e.target.files[0]),n.setState(Object(i.a)({},n.state,{loadingFlag:!0})),n.userService.uploadUserImage(t).then((function(e){n.setState(Object(i.a)({},n.state,{user:Object(i.a)({},n.state.user,{picture:e.secure_url}),loadingFlag:!1}))}),(function(e){console.error(e)}))},n.handleUpdate=function(e){var t=n.state.user;e.preventDefault();var a=n.props.history;t=Object(i.a)({},n.state.user,{email:n.state.email,current_pass:n.state.current_pass,new_pass:n.state.new_pass,repeat_pass:n.state.repeat_pass}),n.userService.updateUserProfile(t).then((function(){return a.push("/main")}))},n.userService=new re,n.state={user:null,loadingFlag:!0,email:"",current_pass:"",new_pass:"",repeat_pass:""},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.userService.getUserByIdShallow(this.props.loggedInUser.id).then((function(t){e.setState(Object(i.a)({},e.state,{user:Object(i.a)({},t),email:t.email,loadingFlag:!1}))}))}},{key:"render",value:function(){var e=this.state.user;return r.a.createElement(r.a.Fragment,null,this.state.loadingFlag?r.a.createElement(Ne,null):e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,ce(e.username)),r.a.createElement("form",null,r.a.createElement(Fe,{picture:e.picture,handleUpload:this.handleUpload,flavour:"signup"}),r.a.createElement("label",{htmlFor:"email"},"User email"),r.a.createElement("input",{className:"big-input",type:"email",name:"email",value:this.state.email,id:"email",onChange:this.handleChange}),r.a.createElement("p",null,"If you want to change your password"),r.a.createElement("label",{htmlFor:"current-pass"},"Enter current password"),r.a.createElement("input",{className:"small-input",type:"password",name:"current_pass",id:"current-pass",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"new-pass"},"Enter new password"),r.a.createElement("input",{className:"small-input",type:"password",name:"new_pass",id:"new-pass",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"repeat-pass"},"Repeat new password"),r.a.createElement("input",{className:"small-input",type:"password",name:"repeat_pass",id:"repeat-pass",onChange:this.handleChange})),r.a.createElement(Oe,{updateHandler:this.handleUpdate})))}}]),t}(a.Component),Me=function e(){var t=this;Object(l.a)(this,e),this.getByName=function(e){return t.instance.get("/&common_name=".concat(e)).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.instance=N.a.create({baseURL:"".concat("https://trefle.io/api/plants/","?token=").concat("VlZkR1N3aVRudTVhV1NmSnlUaTNKUT09","/"),withCredentials:!0})};function De(){var e=Object(g.a)(["\n  font-size: 2rem;\n"]);return De=function(){return e},e}function Re(){var e=Object(g.a)(["\n  width: 100vw;\n  display: flex;\n  align-items: center;\n"]);return Re=function(){return e},e}function Te(){var e=Object(g.a)(["\n"]);return Te=function(){return e},e}function He(){var e=Object(g.a)(["\n  font-size: 1rem;\n  align-self: flex-start;\n  margin-left: 1rem;  \n"]);return He=function(){return e},e}var Le=f.a.label(He()),Ae=f.a.input(Te()),Be=f.a.div(Re()),Ge=f.a.p(De()),We=function(e){var t=e.name,n=e.handleChange,a=e.value,o=e.id,c=e.labelText;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Le,{forHtml:o,name:t},c),r.a.createElement(Be,null,r.a.createElement(Ae,{id:o,type:"range",name:t,step:1,value:a,min:1,max:30,onChange:n}),r.a.createElement(Ge,null,a)))};function Ye(){var e=Object(g.a)(["\n  background-color: ",';\n  font-family: "Encode Sans"; \n  font-size: 1.7rem;\n  padding-bottom: .5rem;\n']);return Ye=function(){return e},e}function Ve(){var e=Object(g.a)(["\ncolor: ",";\n  font-size: 1.2rem;\n  border: none;\n  border-radius: 22px;\n  height: 50px;\n  min-width: 230px;\n  max-width: 350px;\n  padding: 10px;\n  margin: 5px;\n  box-sizing: border-box;\n  ::placeholder {\n    color: ",";\n  }"]);return Ve=function(){return e},e}var qe=f.a.input(Ve(),v.gray,v.gray),Ze=f.a.p(Ye(),v.green),Je=function(e){var t=e.name,n=e.value,a=e.handleChange,o=e.flavour,c=e.placeholder,i=e.id;return r.a.createElement(r.a.Fragment,null,"readonly"===o?r.a.createElement(Ze,null,ce(n)):r.a.createElement(qe,{name:t,value:n,onChange:a,placeholder:c,id:i||null}))},Ke=(n(220),n(81)),Qe=n(58),Xe=Object(Ke.a)(Object(Ke.c)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCm0meO5cjbh70YvG6BIQVh5GqRHXHG7Uw&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"100vh"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),Object(Ke.b)({componentDidMount:function(){var e=this,t={};this.setState({position:null,onMarkerMounted:function(e){t.marker=e},onPositionChanged:function(){var n=t.marker.getPosition();e.props.handleChange({lat:n.lat(),lng:n.lng()})}})}}),Qe.withScriptjs,Qe.withGoogleMap)((function(e){return r.a.createElement(Qe.GoogleMap,{defaultZoom:8,defaultCenter:{lat:e.lat,lng:e.lng}},e.isMarkerShown&&r.a.createElement(Qe.Marker,{position:{lat:e.lat,lng:e.lng},draggable:!0,ref:e.onMarkerMounted,onPositionChanged:e.onPositionChanged,icon:{url:e.picture,size:{width:60,height:60},anchor:{x:15,y:30},scaledSize:{width:30,height:30}}}))})),$e=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isMarkerShown:!1},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Xe,{lat:this.props.lat,lng:this.props.lng,picture:this.props.picture,handleChange:this.props.handleChange,isMarkerShown:!0}))}}]),t}(r.a.PureComponent),et=n(181),tt=n.n(et);function nt(){var e=Object(g.a)(["\n  width: 100vw;\n  display: flex;\n  justify-content: space-evenly;\n  margin-bottom: 1rem;\n"]);return nt=function(){return e},e}function at(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return at=function(){return e},e}var rt=f.a.form(at()),ot=f.a.div(nt()),ct=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(i.a)({},n.state,Object(h.a)({},a,r)))},n.handleLocChange=function(e){var t=e.lat,a=e.lng;n.setState(Object(i.a)({},n.state,{lat:t,lng:a}))},n.toggleInfo=function(e){e.preventDefault(),n.setState(Object(i.a)({},n.state,{infoToggle:!n.state.infoToggle}))},n.toggleMap=function(e){e.preventDefault(),n.setState(Object(i.a)({},n.state,{mapToggle:!n.state.mapToggle}))},n.logPlant=function(e){console.log(n.trefService.getByName(e))},n.handleUpload=function(e){var t=new FormData;t.append("picture",e.target.files[0]),n.setState(Object(i.a)({},n.state,{loadingFlag:!0})),n.plantService.uploadPlantImage(t).then((function(e){n.setState(Object(i.a)({},n.state,{plant:Object(i.a)({},n.state.plant,{picture:e.secure_url}),loadingFlag:!1}))}),(function(e){console.error(e)}))},n.handleUpdate=function(e){e.preventDefault();var t=n.props.history,a=Object(i.a)({},n.state.plant,{common_name:n.state.common_name,name:n.state.name,location:{type:"Point",coordinates:[n.state.lat,n.state.lng]}}),r=n.state.plant.tasks.filter((function(e){return e}));r.length>0?(r.sort((function(e,t){return e.type-t.type})).forEach((function(e){return"WATER"===e.type?e.day_interval=n.state.waterInterval:e.day_interval=n.state.fertilizerInterval})),delete a.tasks,n.plantService.updatePlant(a).then((function(){r.forEach((function(e){return n.taskService.updateTask(e)}))})).then((function(){var e=n.props.loggedInUser;return e.locations.push([n.state.lat,n.state.lng]),e.locations=n.geoService.getUserLocationArr(e.locations),n.userService.updateUser(e)})).then((function(){return t.push("/main")}))):(r=[{begin_day:new Date,day_interval:n.state.waterInterval,type:"WATER"},{begin_day:new Date,day_interval:n.state.fertilizerInterval,type:"FERTILIZER"}],n.taskService.createTasks(r).then((function(e){return console.log(e),a.tasks=[e[0].id,e[1].id],n.plantService.updatePlant(a)})).then((function(){var e=n.props.loggedInUser;return console.log(e),e.locations.push([n.state.lat,n.state.lng]),e.locations=n.geoService.getUserLocationArr(e.locations),console.log(e),n.userService.updateUser(e)})).then((function(){return t.push("/main")})))},n.getPlant=function(){var e=n.props.match.params;n.plantService.getPlantById(e.plantId).then((function(e){n.setState(Object(i.a)({},n.state,{plant:e,name:e.name,common_name:e.common_name,loadingFlag:!1,waterInterval:e.tasks[0].day_interval,fertilizerInterval:e.tasks[1].day_interval,lat:e.location.coordinates[0],lng:e.location.coordinates[1]}))}),(function(e){var t=e.message;console.error(t)}))},n.deleteHandle=function(e){e.preventDefault();var t=Object(i.a)({},n.props.loggedInUser),a=n.state.plant;n.plantService.deletePlant(a.id).then((function(){return n.userService.deleteUserPlant(t,a)})).then((function(){return n.userService.getUserByIdDeep(t.id)})).then((function(e){var t=[];return e.plants.forEach((function(e){return t.push(e.location.coordinates)})),e.locations=n.geoService.getUserLocationArr(t,.002),e.plants=e.plants.reduce((function(e,t){return e.push(t.id),e}),[]),n.userService.updateUser(e)})).then((function(){return n.props.history.push("/main")})).catch((function(e){return console.error(e)}))},n.goBack=function(e,t){e.preventDefault(),n.props.history.push({pathname:"/user-detail",state:{id:t}})},n.plantService=new ne,n.userService=new re,n.taskService=new ae,n.geoService=new oe,n.trefService=new Me,n.state={plant:{},name:"",common_name:"",loadingFlag:!0,waterInterval:0,fertilizerInterval:0,infoToggle:!1,mapToggle:!1,lat:0,lng:0,flavour:e.location.state.flavour},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"createNewPlant",value:function(e){var t=this,n=function(n){var a=[{begin_day:new Date,day_interval:0,type:"WATER"},{begin_day:new Date,day_interval:0,type:"FERTILIZER"}],r={name:"",common_name:"",scientific_name:"",soils_adaptation:[],temperature_minimun:0,shade_tolerance:"",year_rain_range:"",ph_range:"",fertilizer_req:"",perennial:!0,picture:"../images/daisy.jpg",tasks:[],location:{type:"Point",coordinates:n}};t.plantService.createPlant(r).then((function(e){return r=e,t.taskService.createTasks(a)})).then((function(e){return r.tasks=[e[0].id,e[1].id],t.plantService.updatePlant(r)})).then((function(){return e.locations.push(n),e.plants.push(r.id),e.locations=t.geoService.getUserLocationArr(e.locations),t.userService.updateUser(e)})).then((function(){return t.plantService.getPlantById(r.id)})).then((function(e){t.setState(Object(i.a)({},t.state,{plant:Object(i.a)({},e),name:e.name,common_name:e.common_name,lat:e.location.coordinates[0],lng:e.location.coordinates[1],loadingFlag:!1}))})).catch((function(e){return console.error(e)}))};navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){return n([e.coords.latitude,e.coords.longitude])})):n([40.392351,-3.696842])}},{key:"componentDidMount",value:function(){this.logPlant("Canadian serviceberry"),"create"===this.props.location.state.flavour?this.createNewPlant(Object(i.a)({},this.props.loggedInUser)):this.getPlant()}},{key:"render",value:function(){var e=this.state,t=e.flavour,n=e.plant,a=e.name,o=e.common_name,c=this.props.location.state.sourceUserId;return r.a.createElement(r.a.Fragment,null,this.state.plant&&r.a.createElement(r.a.Fragment,null,this.state.loadingFlag?r.a.createElement(Ne,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("aside",{className:this.state.infoToggle?"show-aside":"",onClick:this.toggleInfo},r.a.createElement("h2",null,ce(n.common_name)),r.a.createElement("p",null,ce(n.scientific_name)),r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,"Soil preference"),r.a.createElement("p",null,n.soils_adaptation.map((function(e){return ce(e)})).join(", "))),r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,"Temperature minimun"),r.a.createElement("p",null,n.temperature_minimun,"\xb0C")),r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,"Shade tolerance"),r.a.createElement("p",null,n.shade_tolerance)),r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,"Yearly precipitation rate"),r.a.createElement("p",null,n.year_rain_range)),r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,"pH range"),r.a.createElement("p",null,n.ph_range)),r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,"Fertilizer needs"),r.a.createElement("p",null,n.fertilizer_req)),r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,"Perennial"),r.a.createElement("p",null,n.perennial?"Yes":"No"))),this.state.mapToggle&&r.a.createElement("div",{className:"map-wrapper"},r.a.createElement($e,{className:"map",lat:this.state.lat,lng:this.state.lng,picture:this.state.plant.picture,handleChange:this.handleLocChange}),r.a.createElement("button",{className:"map-btn",onClick:this.toggleMap,style:{backgroundImage:"url("+tt.a+")"}})),r.a.createElement(F,{src:"./images/green_care_w.svg",alt:"green care logo",logoutHandler:this.props.handleLogout,controls:!0}),r.a.createElement(rt,null,r.a.createElement(Je,{name:"name",value:a,handleChange:this.handleChange,flavour:t,placeholder:"Plant name"}),r.a.createElement(Fe,{picture:n.picture,handleUpload:this.handleUpload,flavour:t}),r.a.createElement(Je,{className:"sub-text",name:"common_name",value:o,handleChange:this.handleChange,flavour:t,placeholder:"Plant species"}),r.a.createElement(ot,null,r.a.createElement(be,{img:"../images/map_w.svg",clicked:this.toggleMap}),r.a.createElement(be,{img:"../images/info_w.svg",clicked:this.toggleInfo}),"readonly"!==t&&r.a.createElement(be,{img:"../images/trash_b_w.svg",clicked:this.deleteHandle})),r.a.createElement(We,{id:"waterSlider",name:"waterInterval",value:this.state.waterInterval,handleChange:"readonly"!==t?this.handleChange:function(){return""},labelText:"Watering interval"}),r.a.createElement(We,{id:"fertSlider",name:"fertilizerInterval",value:this.state.fertilizerInterval,handleChange:"readonly"!==t?this.handleChange:function(){return""},labelText:"Fertilizer"})),r.a.createElement(Oe,{flavour:t,updateHandler:this.handleUpdate,sourceUserId:c,goBackHandler:this.goBack}))))}}]),t}(a.Component),it=n(182);function lt(e){var t=e.component,n=e.user,a=e.logoutHandler,o=e.redirectPath,c=Object(it.a)(e,["component","user","logoutHandler","redirectPath"]);return r.a.createElement(p.b,Object.assign({},c,{render:function(e){return n?r.a.createElement(t,Object.assign({loggedInUser:n,handleLogout:a},e)):r.a.createElement(p.a,{to:{pathname:o}})}}))}var st=n(80),ut=n(183),mt=n.n(ut),dt=(n(428),{width:"100%",height:"100%"}),pt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).displayMarkers=function(e,t){return r.a.createElement(st.Marker,{key:t,draggable:!1,position:{lat:e.lat,lng:e.lng},icon:{url:e.picture,size:{width:60,height:60},anchor:{x:15,y:30},scaledSize:{width:30,height:30}},text:e.name,onClick:function(t){return n.props.history.push({pathname:"/user-detail",state:{id:e.id}})}})},n.userService=new re,n.state={users:null,loadingFlag:!0,getAside:!1},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.userService.getUsers().then((function(t){return e.setState(Object(i.a)({},e.state,{users:t,loadingFlag:!1}))}))}},{key:"render",value:function(){var e=this,t=null;return this.state.users&&(t=this.state.users.map((function(e){return e.locations.map((function(t){return{lat:t[0],lng:t[1],name:e.username,id:e.id,picture:e.picture}}))})).flat()),r.a.createElement(r.a.Fragment,null,this.state.loadingFlag?r.a.createElement(Ne,null):r.a.createElement("div",{className:"map-wrapper"},r.a.createElement(st.Map,{className:"map",google:this.props.google,zoom:15,style:dt,initialCenter:{lat:40.00017181918281,lng:-3.500384701223889},fullscreenControl:!1},t.map((function(t,n){return e.displayMarkers(t,n)}))),r.a.createElement(y.b,{to:{pathname:"/main"}},r.a.createElement("button",{className:"map-btn",onClick:this.toggleMap,style:{backgroundImage:"url("+mt.a+")"}}))))}}]),t}(a.Component),ht=Object(st.GoogleApiWrapper)({apiKey:"AIzaSyCm0meO5cjbh70YvG6BIQVh5GqRHXHG7Uw"})(pt),gt=n(185),ft=(n(429),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).userService=new re,n.state={name:null,loadingFlag:!0,email:"",plants:null,picture:null},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.userService.getUserByIdDeep(this.props.location.state.id).then((function(t){e.setState(Object(i.a)({},e.state,{name:t.username,plants:Object(gt.a)(t.plants),email:t.email,loadingFlag:!1,picture:t.picture}))}))}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.picture,o=e.plants,c=this.props.location.state.id;return r.a.createElement(r.a.Fragment,null,this.state.loadingFlag?r.a.createElement(Ne,null):o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{logoutHandler:this.props.handleLogout,controls:!0}),r.a.createElement("div",{className:"big-div"},r.a.createElement("h1",null,ce(t)),r.a.createElement(Fe,{picture:a,handleUpload:function(){return""},flavour:"readonly"}),r.a.createElement("h2",{className:"email-row"},n),r.a.createElement("div",{className:"small-div"},o.splice(0,3).map((function(e,t){return r.a.createElement(y.b,{key:t,to:{pathname:"/plant-detail/".concat(e.id),state:{flavour:"readonly",sourceUserId:"".concat(c)}}},r.a.createElement(Fe,{picture:e.picture,handleUpload:function(){return""},flavour:"readonly",size:"120"}))}))),r.a.createElement(Oe,{updateHandler:function(){return""},flavour:"readonly"}))))}}]),t}(a.Component)),vt=n(36),bt=n.n(vt),Et=(n(430),function e(){var t=this;Object(l.a)(this,e),this.getDaysWithTask=function(e,t,n,a){var r=[],o=bt()(e),c=bt()(t);if(o.isValid()&&c.isValid()&&n>0&&a>0){var i=bt()().recur(o,bt()(c).add(a,"days"));i.every(n,"days"),r=i.fromDate(c).all("YYYY-MM-DD")}return r},this.getForecast=function(e,n){return t.instance.get("daily/?key=".concat("c04ae686677d4bef8da045bf62cff76d","&lat=").concat(e,"&lon=").concat(n)).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.getIcon=function(e){switch(e){case 700:case 711:case 721:case 731:case 803:case 804:return"cloud";case 800:case 801:case 802:return"sun";case 232:case 511:case 600:case 601:case 602:case 621:case 622:case 751:return"snow";default:return"rain"}},this.instance=N.a.create({baseURL:"".concat("https://api.weatherbit.io/v2.0/forecast")})}),wt=n(184),yt=n.n(wt),jt=(n(431),n(432),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"day-container"},r.a.createElement("div",{className:"task-wrapper"},r.a.createElement("span",{className:"day-slug"},this.props.daySlug),this.props.plantList.map((function(e,t){return r.a.createElement("div",{key:t,className:"links-wrapper"},r.a.createElement(y.b,{to:{pathname:"/plant-update/".concat(e[0]),state:{flavour:"update"}}},r.a.createElement("img",{className:"task-pic task-pic-".concat(e[2]),src:e[1],alt:""})))}))),r.a.createElement("img",{className:"weather-icon",src:this.props.weatherIcon,alt:""}))}}]),t}(a.Component)),Ot=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).getDaysArray=function(e,t){var a=e[0].date,r=e.length,o=t.reduce((function(e,t){return t.tasks.forEach((function(o){n.calendarService.getDaysWithTask(o.begin_day,a,o.day_interval,r).forEach((function(n){return e.push({date:n,type:"WATER"===o.type?"blue":"red",id:t.id,picture:t.picture})}))})),e}),[]);return e.map((function(e){var t=o.filter((function(t){return t.date===e.date})).map((function(e){return[e.id,e.picture,e.type]}));return Object(i.a)({},e,{tasks:t})}))},n.userService=new re,n.calendarService=new Et,n.state={loadingFlag:!0,emptyCalendar:!0},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.loggedInUser.locations.length>0){var t=null;this.calendarService.getForecast(this.props.loggedInUser.locations[0][0],this.props.loggedInUser.locations[0][1]).then((function(n){return t=n.data.map((function(t){return{date:t.valid_date,icon:e.calendarService.getIcon(t.weather.code)}})),e.userService.getUserByIdDeep(e.props.loggedInUser.id).then((function(n){e.setState(Object(i.a)({},e.state,{user:n,loadingFlag:!1,emptyCalendar:!1,forecast:t}))}))}))}}},{key:"render",value:function(){var e=null;return this.state.forecast&&this.state.user.plants&&(e=this.getDaysArray(this.state.forecast,this.state.user.plants)),r.a.createElement(r.a.Fragment,null,this.state.loadingFlag?r.a.createElement(Ne,null):r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(F,{className:"title-box"}),r.a.createElement(y.b,{to:{pathname:"/main"}},r.a.createElement("button",{className:"close-btn",style:{backgroundImage:"url("+yt.a+")"}}))),this.state.emptyCalendar&&r.a.createElement("h1",null,"You have no plants yet, go back and add some !"),this.state.user&&r.a.createElement(r.a.Fragment,null,e&&e.map((function(e,t){return r.a.createElement(jt,{key:t,daySlug:bt()(e.date).format("dd"),weatherIcon:"./images/".concat(e.icon,".svg"),plantList:e.tasks})})))))}}]),t}(a.Component),kt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).setUser=function(e){n.setState(Object(i.a)({},n.state,{user:e}))},n.fetchUser=function(){null===n.state.user&&n.authService.loggedInUser().then((function(e){n.setUser(e)}),(function(e){n.setUser(!1)})).catch((function(){n.setUser(!1)}))},n.logout=function(e){n.authService.logout().then((function(e){n.setState(Object(i.a)({},n.state,{user:null}))}))},n.authService=new z,n.state={user:null,flag:!1},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this,t=this.state.user;return r.a.createElement("div",{className:"App"},t&&r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(Y,Object.assign({},t,{setUser:e.setUser}))}}),r.a.createElement(p.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(te,Object.assign({},t,{setUser:e.setUser}))}}),r.a.createElement(lt,{exact:!0,path:"/main",user:t,component:ke,logoutHandler:this.logout}),r.a.createElement(lt,{exact:!0,path:"/plant-detail/:plantId",user:t,component:ct,logoutHandler:this.logout}),r.a.createElement(lt,{exact:!0,path:"/plant-update/:plantId",user:t,component:ct,logoutHandler:this.logout}),r.a.createElement(lt,{exact:!0,path:"/plant/new",user:t,component:ct,logoutHandler:this.logout}),r.a.createElement(lt,{exact:!0,path:"/profile",user:t,component:ze,logoutHandler:this.logout}),r.a.createElement(lt,{exact:!0,path:"/plants-map",user:t,component:ht,logoutHandler:this.logout}),r.a.createElement(lt,{exact:!0,path:"/user-detail",user:t,component:ft,logoutHandler:this.logout}),r.a.createElement(lt,{exact:!0,path:"/calendar",user:t,component:Ot,logoutHandler:this.logout})),!t&&r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(Y,Object.assign({},t,{setUser:e.setUser}))}}),r.a.createElement(p.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(te,Object.assign({},t,{setUser:e.setUser}))}}),r.a.createElement(p.b,{path:"/",render:function(e){return r.a.createElement(p.a,{to:{pathname:"/login"}})}})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(y.a,null,r.a.createElement(kt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[188,1,2]]]);
//# sourceMappingURL=main.b13af25b.chunk.js.map